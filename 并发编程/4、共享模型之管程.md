# 共享模型之管程

## 共享带来的问题

### 临界区

+ 一个程序运行多个线程本身是没有问题的
+ 问题出在多个线程访问**共享资源**
  + 多个线程读**共享资源**其实也没有问题
  + 在多个线程对**共享资源**读写操作时发生指令交错，就会出现问题
+ 一段代码块内如果存在对**共享资源**的多线程读写操作，称这段代码块为**临界区**

例如，下面代码中的临界区

``` java
static int counter = 0;
static void increment() 
// 临界区
{ 
    counter++; 
}
static void decrement() 
// 临界区
{ 
    counter--; 
}
```

### 竞态条件

多个线程在临界区内执行，由于代码的**执行序列**不同而导致结果无法预测，称之为发生了**竞态条件**  

## synchronized 解决方案

### 应用之互斥
